# H3 - Aaltoja harjaamassa

Tehtävänannot luettavissa https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/

Tehtävissä käytetty laitteisto: 
````
OS: Kali Linux 2023.4
RAM: 16GB
CPU: 12th Gen Intel(R) Core(TM) i7-1255u (x86_64)
````

## x) Lue/kuuntele ja tiivistä

### Hubacek 2019: Universal Radio Hacker SDR Tutorial on 433 MHz radio plugs 

Videolla Hubacek kaappaa URH:n avulla ~433Mhz taajuudella lähetetyn kaukosäätimen viestin.

Kaappaamisen vaiheet:
 - Tarkan taajuuden valinta:
    - File -> Spectrum Analyzer
    - Suuntaa-antava taajuus frequency-kenttään
    - Jostain syystä taajuutta ei kannata valita signaalin huipulta, vaan hieman sivusta
 - Nauhoittaminen:
    - File -> Record signal
    - Start/stop
    - Tallennus
 - Viestin purkaminen:
    - Modulaation valinta
    - (Autodetect parameters). Hyvällä tuurilla toimii.
    - Muussa tapauksessa bit lengthin manuaalinen säätäminen maalaamalla yhden bitin verran graafista

Lähde: https://youtu.be/sbqMqb6FVMY?t=199

### Cornelius 2022: Decode 433.92 MHz weather station data


Lähde: https://www.onetransistor.eu/2022/01/decode-433mhz-ask-signal.html

## A) WebSDR

Suorituksen vaiheet:
 - Googletin WebSDR ja valitsin ensimmäisen hakutuloksen http://websdr.org/
 - Sivulla oli listattuna softaradioita ympäri maailman ja sijoitettu ne lisäksi sivun alalaidasta löytyvään karttaan
 - Valitsin Ranskasta radion http://ham.websdrbordeaux.fr:8000/index3.html
 - Sivun ylälaidassa oli vesiputousmallin kuvaaja radioliikenteestä eri taajuuksilla. Valitsin kanavan, jolla näytti olevan jonkinlaista liikennettä.
 - Testasin eri modulaatioita, joista AM tuntui sopivan kyseisen kanavan kuuntelemiseen.

![Add file: websdr](/img/h3/websdr.png)
> Aamuviestintää Bordeauxissa


Lähteet:

http://websdr.org/

http://ham.websdrbordeaux.fr:8000/index3.html


## B) rtl_433

Tehtävän vinkkiosion perusteella rtl_433 pitäisi löytyä Kalille suoraan paketinhallinnasta. Aloitin päivittämällä paketinhallinnan listat komennolla ``$ sudo apt-get update``, minkä jälkeen latasin ja asensin rtl_433:n komennolla ``$ sudo apt-get install rtl-433``.  Testasin lopuksi asennuksen onnistuneen ``$ rtl_433``.

![Add file: rtl_asennus](/img/h3/rtl_433_1.png)
> Asennus onnistunut. Tietokoneeseen kytkettyjä SDR-laitteita ei ole.

## C) Automaattinen analyysi

Latasin tehtävässä analysoitavan tiedoston ``$ wget https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/samples/Converted_433.92M_2000k.cs8``, jonka avasin rtl_433:lla komennolla ``$ rtl_433 Converted_433.92M_2000k.cs8``. 

![Add file: rtl433](/img/h3/rtl_433_2.png)
>rtl_433 näkemys viesteistä

Omaa tulkintaani/veikkauksia eri kentistä:
 - ``time``: lähetysaika tallennetiedoston alusta mitattuna
 - ``model``: viestin lähettäneen laitteen malli
 - ``id``: oletettavasti jokin laitteen tunniste
 - ``Command``: lähetetty komento
 - ``Dim & Dim Value``: Valokatkaisijan himmennysominaisuuksia?
 - ``Group call``: -
 - ``Channel``: Jonkin sortin kanavatieto. Ehkä samalla taajuudella voidaan viestiä useamman vastaavan laitteen kesken eri kanavia hyödyntäen?
 - ``Unit``: -
 - ``Group``: 

KlikAanKlikUit-Switch voisi olla jonkin sortin valokatkaisija, joka lähettää tallenteella 4 kertaa Off-viestin. Lähetysten välillä kestää noin 0.08 sekuntia. Kokonaistallenteen kesto on 0.38s. Proove- ja Nexa-securityn viestien aikaleima on sama kuin oletetulla valokatkaisijalla, joten ehkä nämäkin viestit lähtevät off-viestin yhteydessä samalta laitteelta, mutta lienevät jotain turvallisuusominaisuuksia.  


## D) Too complex 16?

Latasin tiedoston ``$ wget https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/samples/Recorded-HackRF-20250411_183354-433_92MHz-2MSps-2MHz.complex16s`` ja tarkastelin hieman tarkemmin sen nimeä. Tehtävän vinkkiosion mukaan complex16s-tiedoston saa muokattua cs8-muotoiseksi nimeä vaihtamalla. Nimessä tulee ilmetä taajuus megahertseinä ja näytteenottotaajuus kilohertseinä. Erottimena toimii alaviiva, joten ylimääräiset alaviivat tuli karsia lopullisesta nimestä pois ja näytteenottotaajuus muokata alkuperäisen tiedostonimen MHz -> k (1 MHz = 1000 KHz). 

Koitin kepillä jäätä ja muokkasin tiedostonimen komennolla ``$ mv Recorded-HackRF-20250411_183354-433_92MHz-2MSps-2MHz.complex16s Recorded-HackRF_433.92MHz_2000k.cs8``, minkä jälkeen avasin sen rtl_433:lla komennolla ``$ rtl_433 Recorded-HackRF_433.92M_2000k.cs8``. Muunnos ilmeisesti onnistui ja tallenne vaikutti sisällöltään samalta kuin edellisessä tehtävässä analysoimani.

![Add file: muunnettu tiedosto](/img/h3/rtl_433_3.png)
> Ajettu komento ja rtl_433:n siitä tulkitsema liikenne

## E) Ultimate


## F) Yleiskuva


## G) Bittistä


## H) Vapaaehtoinen: SDR++


## I) Vapaaehtoinen: GNU radio


## Lähteet

Karvinen, 2025: Verkkoon tunkeutuminen ja tiedustelu. Luettavissa https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/.




